<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fidelity Performance · BLKPVNTHR</title>

    <link rel="stylesheet" href="styles.css?v=4" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

    <!-- Page-only CSS (keep here or move into styles.css) -->
    <style>
      .page-wrap {
        max-width: 1250px;
        margin: 18px auto;
        padding: 0 14px 40px;
      }

      .perf-grid {
        display: grid;
        grid-template-columns: 320px minmax(0, 1fr) 360px;
        gap: 14px;
        align-items: start;
      }

      @media (max-width: 1100px) {
        .perf-grid {
          grid-template-columns: 1fr;
        }
      }

      .panel {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 14px;
        padding: 14px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
      }

      .panel h2 {
        margin: 0 0 10px;
        font-size: 16px;
        color: #eaf2ff;
      }

      .subhead {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        gap: 10px;
        margin-bottom: 10px;
      }

      .chiprow {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        align-items: center;
      }

      .chip {
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: rgba(255, 255, 255, 0.03);
        color: var(--text);
        border-radius: 999px;
        padding: 6px 10px;
        font-size: 12px;
        cursor: pointer;
        user-select: none;
      }
      .chip.active {
        border-color: rgba(125, 211, 252, 0.35);
        background: rgba(125, 211, 252, 0.12);
      }

      .accounts {
        display: grid;
        gap: 10px;
      }

      .acct {
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(0, 0, 0, 0.18);
        border-radius: 12px;
        padding: 10px;
        cursor: pointer;
      }
      .acct.active {
        outline: 2px solid rgba(125, 211, 252, 0.35);
        background: rgba(125, 211, 252, 0.08);
      }

      .acct-top {
        display: flex;
        justify-content: space-between;
        gap: 10px;
        align-items: start;
      }

      .acct-name {
        font-weight: 800;
        line-height: 1.15;
      }
      .acct-meta {
        margin-top: 4px;
        font-size: 12px;
        color: var(--muted);
      }

      .money {
        font-variant-numeric: tabular-nums;
      }

      .delta {
        margin-top: 4px;
        font-size: 12px;
        text-align: right;
      }
      .delta.up {
        color: #6ee7b7;
      }
      .delta.down {
        color: #fca5a5;
      }
      .delta.flat {
        color: var(--muted);
      }

      .kvline {
        display: flex;
        justify-content: space-between;
        gap: 10px;
        padding: 8px 0;
        border-bottom: 1px dashed rgba(255, 255, 255, 0.08);
      }
      .kvline:last-child {
        border-bottom: none;
      }

      .chart-wrap {
        height: 360px;
      }
      @media (max-width: 1100px) {
        .chart-wrap {
          height: 300px;
        }
      }

      .movers {
        display: grid;
        gap: 10px;
      }
      .mover {
        display: flex;
        justify-content: space-between;
        gap: 10px;
        align-items: center;
        padding: 10px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(0, 0, 0, 0.18);
      }
      .mover .sym {
        font-weight: 800;
      }
      .mover .note {
        font-size: 12px;
        color: var(--muted);
        margin-top: 2px;
      }
      .mover .pct {
        font-weight: 900;
        font-variant-numeric: tabular-nums;
      }
      .pct.up {
        color: #6ee7b7;
      }
      .pct.down {
        color: #fca5a5;
      }

      .kpi-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }
      @media (max-width: 1100px) {
        .kpi-grid {
          grid-template-columns: 1fr;
        }
      }

      .kpi {
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(0, 0, 0, 0.18);
        border-radius: 12px;
        padding: 10px;
      }
      .kpi .label {
        display: block;
        font-size: 12px;
        color: var(--muted);
        margin: 0 0 6px;
      }
      .kpi .val {
        font-size: 18px;
        font-weight: 900;
        font-variant-numeric: tabular-nums;
      }

      .tinyhelp {
        margin-top: 10px;
        font-size: 12px;
        color: var(--muted);
      }
    </style>
  </head>

  <body>
    
        <div id="navbar-placeholder"></div>
  <div class="page-wrap">
      <div id="navbar-placeholder"></div>
    </div>
      
      <div class="header" style="margin-bottom: 12px;">
        
        <div>
          <h1 style="margin:0;margin-top:0 !important;padding-top: 0 !important; font-size:24px;">Account Performance</h1>
          <p class="muted" style="margin:6px 0 0;">
            BLKPVNTHR-TRUST · BLKPVNTHR LLC · Fidelity Checking · Fidelity ROTH
          </p>
        </div>
        <div class="actions">
          <button id="btnReset" class="btn ghost" type="button">Portfolio view</button>
          <button id="btnRefresh" class="btn primary" type="button">Refresh</button>
        </div>
      </div>

        <!-- NAVBAR WILL LOAD HERE -->
      <div class="perf-grid">
        
        <!-- LEFT -->
        <aside class="panel">
          <div class="subhead">
            <h2 style="margin:0;">Accounts & Balances</h2>
            <span class="tiny muted" id="asOf">as of —</span>
          </div>

          <div class="kvline">
            <span class="muted">Total Balance</span>
            <strong class="money" id="totalBalance">$0.00</strong>
          </div>
          <div class="kvline" style="margin-bottom: 10px;">
            <span class="muted">Today Change</span>
            <strong class="money" id="totalChange">$0.00</strong>
          </div>

          <div class="accounts" id="accountsList"></div>

          <div class="tinyhelp">
            Click an account to chart it. Use “Portfolio view” to return to combined.
          </div>
        </aside>

        <!-- CENTER -->
        <main class="panel">
          <div class="subhead">
            <h2 style="margin:0;" id="chartTitle">Portfolio Performance</h2>
            <div class="chiprow">
              <span class="chip active" data-range="30">30D</span>
              <span class="chip" data-range="90">90D</span>
              <span class="chip" data-range="365">1Y</span>
            </div>
          </div>

          <div class="chart-wrap">
            <canvas id="perfChart"></canvas>
          </div>

          <div class="kvline" style="margin-top: 10px;">
            <span class="muted">Period Return</span>
            <strong class="money" id="periodReturn">$0.00</strong>
          </div>
          <div class="kvline">
            <span class="muted">Period %</span>
            <strong id="periodPct">0.00%</strong>
          </div>
        </main>

        <aside class="side-col">
  <!-- Card 1: Movers -->
  <section class="card">
    <h2>Top / Bottom Movers</h2>

    <div class="grid2">
      <div>
        <h3 class="muted" style="margin: 0 0 8px;">Top Movers</h3>
        <div id="topMovers" class="kv">
          <!-- rows injected by JS -->
        </div>
      </div>

      <div>
        <h3 class="muted" style="margin: 0 0 8px;">Bottom Movers</h3>
        <div id="bottomMovers" class="kv">
          <!-- rows injected by JS -->
        </div>
      </div>
    </div>
  </section>

  <!-- Card 2: Key Totals -->
  <section class="card">
    <h2>Expenses TTM</h2>

    <div class="kv">
      <div class="row">
        <span>LLC Distributions</span>
        <span class="highlight" id="tot_llc_dist">$0.00</span>
      </div>
      <div class="row">
        <span>Trust Distributions</span>
        <span class="highlight" id="tot_trust_dist">$0.00</span>
      </div>
      <div class="row">
        <span>IRA Contributions</span>
        <span class="highlight" id="tot_ira_contrib">$0.00</span>
      </div>
      <div class="row">
        <span>Total LLC Expenditures (TTM)</span>
        <span class="highlight" id="tot_llc_exp_ttm">$0.00</span>
      </div>
    </div>
  </section>
</aside>

      </div>
    </div>

    <script src="fidelity.js"></script>
    <script>
  (async () => {
    const holder = document.getElementById("navbar-placeholder");
    if (!holder) {
      console.error("navbar-placeholder not found in DOM");
      return;
    }

    try {
      const res = await fetch("/navbar.html", { cache: "no-store" });
      console.log("navbar fetch:", res.status, res.statusText);

      if (!res.ok) throw new Error(`navbar.html HTTP ${res.status}`);

      holder.innerHTML = await res.text();

      // bind mobile toggle AFTER injection
      const toggle = document.querySelector(".nav-toggle");
      const menu = document.querySelector(".nav-menu");
      toggle?.addEventListener("click", () => menu?.classList.toggle("open"));
    } catch (e) {
      console.error("Navbar load failed:", e);
      holder.innerHTML =
        '<div class="card"><b>Navbar failed to load.</b> Check console for errors.</div>';
    }
  })();
</script>

  </body>
</html>
